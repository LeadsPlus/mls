-# if there were errors then we need to show the offending search

- if @search && @search.errors.any?
  - new_search = @search
- else
  - new_search = Search.new

:javascript
  $(function(){
    $('div#jquery-slider').slider({
        range: true,
        min: 1,
        max: 2000,
        step: 10,
        values: [ #{new_search.min_payment}, #{new_search.max_payment} ],
         slide: function( event, ui ) {
          $( "#search_min_payment" ).val( ui.values[ 0 ] );
          $( "#search_max_payment" ).val( ui.values[ 1 ] );
         }
    });
  });

=form_for new_search do |f|
  =render 'shared/error_messages', :object => f.object
  #other_fields
    %span.field
      =f.label :deposit, "Deposit (€)"
      =f.text_field :deposit, :value => new_search.deposit, :size => 6

    %span.field
      =f.label :county
      =f.select :county, new_search.county_choices, :selected => new_search.county.to_i

    =f.submit :Search

  #payments
    #boxes
      %b Monthly Payment Range:
      %span.field
        -#=f.label :min_payment, "Min Payment (€)"
        =f.text_field :min_payment, :value => new_search.min_payment, :size => 6

      %span.field
        -#=f.label :max_payment, "Max Payment (€)"
        =f.text_field :max_payment, :value => new_search.max_payment, :size => 6

    #jquery-slider

